{% macro content( when ) %}
{{ when|safe }} foo {{ caller() }} bar
pity the {{ caller() }} foo 
{% endmacro %}